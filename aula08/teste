Desenvolva um banco de dados e importe os shapefiles referentes ao município
de Santa Maria no complemento QuickOSM do QGIS dos seguintes dados:
▪ O polígono do limite municipal a partir da tag “admin_level” com o valor 8.
▪ Os bairros que serão armazenados usando a geometria polígono e
obtidos usando a tag "admin_level" com o valor 10.
▪ As feiras que serão armazenadas usando a geometria ponto e obtidas usando
a tag amenity = marketplace.
Após a importação, as tabelas deverão ser alteradas de modo a eliminar colunas
que não tenham conteúdo cadastrado ou irrelevantes.
A partir do banco de dados elabore consultas SQL para responder as seguintes
questões:
1) Qual a distância entre as feiras e a feira da Avenida Roraima no bairro de Camobi?
SELECT f2.name, st_distance(st_Transform(f1.geom, 31982),
st_Transform(f2.geom, 31982)) AS distancia
FROM feira_pontos as f1, feira_pontos as f2
WHERE f1.gid = 1
2) Encontre o nome e a geometria das feiras por bairro? Utilize a função
ST_CONTAINS (https://postgis.net/docs/ST_Contains.html)
select bairros.name, feira_pontos.name, st_astext(feira_pontos.geom)
from bairros, feira_pontos
where ST_contains(bairros.geom , feira_pontos.geom)
3) Quantas feiras existem por bairro?
select bairros.name, count(feira_pontos.*) num_feiras
from bairros, feira_pontos
where ST_contains(bairros.geom , feira_pontos.geom)
group by bairros.name
4) Quantas feiras existem no bairro Centro?
select count(feira_pontos.*) num_feiras
from bairros, feira_pontos
where ST_contains(bairros.geom , feira_pontos.geom)
and bairros.name = 'Centro'
5) Qual a área dos bairros?
select name, st_area(st_Transform(geom, 31982)) from bairros
6) Qual o perímetro dos bairros?
select name, st_perimeter(st_Transform(geom, 31982)) from bairros
7) Listar os campos gid, name e geom de todas as feiras e ordene pelo name. Utilize
o comando st_astext para listar a coluna geom.
select gid, name, st_astext(geom) from feira_pontos
order by name asc
